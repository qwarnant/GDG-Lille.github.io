<!doctype html>
<html ng-app="gdgBoomerang">
<head>
    <title>GDG Lille</title>
    <link rel="canonical" ng-href="{{ canonical }}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description"
          content="Google Developer Groups (GDG) are technology user groups that meet to discuss the latest Technologies, Tools, SDKs, & APIs like Android, GWT, GAE, & GCP.">
    <meta name="application-name" content="GDG Boomerang">
    <meta name="fragment" content="!"/>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,700italic,300,700' rel='stylesheet'
          type='text/css'>
    <link href="http://maxcdn.bootstrapcdn.com/bootswatch/3.2.0/yeti/bootstrap.min.css" rel="stylesheet">
    <link href="css/gdg.css" rel="stylesheet" media="screen">
    <link rel="icon" sizes="16x16 32x32" href="/favicon.ico">
    <style>
        html, body {
            height: 100%;
        }

        a {
            color: #8888ff;
        }

    </style>
</head>
<body ng-controller="MainControl">
<!-- NAV -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" ng-click="isNavCollapsed = !isNavCollapsed">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" ng-cloak id="gdg_chapter_name" href="#!/about">{{ chapter_name }}</a>
        </div>
        <div class="navbar-collapse collapse" collapse="isNavCollapsed" ng-click="isNavCollapsed = true">
            <ul class="nav navbar-nav">
                <li ng-class="{ 'active' : activeTab=='about' }"><a href="#!/about">A propos</a></li>
                <li ng-class="{ 'active' : activeTab=='news' }"><a href="#!/news">Nouveautés</a></li>
                <li ng-class="{ 'active' : activeTab=='events' }"><a href="#!/events">Événements</a></li>
                <li ng-class="{ 'active' : activeTab=='photos' }"><a href="#!/photos">Photos</a></li>
                <li><a ng-href="{{ google_plus_link }}" rel="publisher" target="_blank">Google+</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Nos partenaires <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#">Google France</a></li>
                        <li><a href="#">IBM</a></li>
                        <li><a href="#">Université de Lille 1</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Associations</li>
                        <li><a href="#">Ch'ti JUG</a></li>
                        <li><a href="#">Ch'ti JS</a></li>
                    </ul>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>
<div class="container">
    <div class="row" ng-view></div>
</div>
<div id="container" style="position:fixed; top:0px; left:0px; z-index:-5;">

</div>
</body>

<script src="http://code.angularjs.org/1.2.16/angular.min.js"></script>
<script src="http://code.angularjs.org/1.2.16/angular-sanitize.min.js"></script>
<script src="http://code.angularjs.org/1.2.16/angular-route.min.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script src="lib/angular.ui.min.js"></script>
<script src="lib/three.min.js"></script>
<script src="lib/tween.min.js"></script>
<script src="lib/TrackballControls.js"></script>
<script src="lib/CSS3DRenderer.js"></script>
<script src="js/boomerang.js"></script>
<script src="js/config.js"></script>
<script src="js/main.js"></script>
<script>

    var camera, scene, renderer;
    var controls;

    var particlesTotal = 512;
    var positions = [];
    var objects = [];
    var current = 0;

    init();
    animate();

    function init() {

        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 5000 );
        camera.position.set( 600, 400, 1500 );
        camera.lookAt( new THREE.Vector3() );

        scene = new THREE.Scene();

        var image = document.createElement( 'img' );
        image.addEventListener( 'load', function ( event ) {

            for ( var i = 0; i < particlesTotal; i ++ ) {

                var object = new THREE.CSS3DSprite( image.cloneNode() );
                object.position.x = Math.random() * 4000 - 2000,
                        object.position.y = Math.random() * 4000 - 2000,
                        object.position.z = Math.random() * 4000 - 2000
                scene.add( object );

                objects.push( object );

            }

            transition();

        }, false );
        image.src = './images/sprite.png';


        // Random

        for ( var i = 0; i < particlesTotal; i ++ ) {

            positions.push(
                    Math.random() * 4000 - 2000,
                    Math.random() * 4000 - 2000,
                    Math.random() * 4000 - 2000
            );

        }

        // Sphere

        var radius = 1350;

        for ( var i = 0; i < particlesTotal; i ++ ) {

            var phi = Math.acos( -1 + ( 2 * i ) / particlesTotal );
            var theta = Math.sqrt( particlesTotal * Math.PI ) * phi;

            positions.push(
                    radius * Math.cos( theta ) * Math.sin( phi ),
                    radius * Math.sin( theta ) * Math.sin( phi ),
                    radius * Math.cos( phi )
            );

        }

        // Random

        for ( var i = 0; i < particlesTotal; i ++ ) {

            positions.push(
                    Math.random() * 4000 - 2000,
                    Math.random() * 4000 - 2000,
                    Math.random() * 4000 - 2000
            );

        }

        // Sphere

        var radius = 1350;

        for ( var i = 0; i < particlesTotal; i ++ ) {

            var phi = Math.acos( -1 + ( 2 * i ) / particlesTotal );
            var theta = Math.sqrt( particlesTotal * Math.PI ) * phi;

            positions.push(
                    radius * Math.cos( theta ) * Math.sin( phi ),
                    radius * Math.sin( theta ) * Math.sin( phi ),
                    radius * Math.cos( phi )
            );

        }

        //

        renderer = new THREE.CSS3DRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.domElement.style.position = 'absolute';
        document.getElementById( 'container' ).appendChild( renderer.domElement );

        //

        controls = new THREE.TrackballControls( camera, renderer.domElement );
        controls.rotateSpeed = 0.5;

        //

        window.addEventListener( 'resize', onWindowResize, false );

    }

    function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

    }

    function transition() {

        var offset = current * particlesTotal * 3;
        var duration = 2000;

        for ( var i = 0, j = offset; i < particlesTotal; i ++, j += 3 ) {

            var object = objects[ i ];

            new TWEEN.Tween( object.position )
                    .to( {
                        x: positions[ j ],
                        y: positions[ j + 1 ],
                        z: positions[ j + 2 ]
                    }, Math.random() * duration + duration )
                    .easing( TWEEN.Easing.Exponential.InOut )
                    .start();

        }

        new TWEEN.Tween( this )
                .to( {}, duration * 3 )
                .onComplete( transition )
                .start();

        current = ( current + 1 ) % 4;

    }

    function animate() {

        requestAnimationFrame( animate );

        TWEEN.update();
        controls.update();

        var time = performance.now();

        for ( var i = 0, l = objects.length; i < l; i ++ ) {

            var object = objects[ i ];
            var scale = Math.sin( ( Math.floor( object.position.x ) + time ) * 0.002 ) * 0.3 + 1;
            object.scale.set( scale, scale, scale );

        }

        renderer.render( scene, camera );

    }

</script>

</html>
